{"version":3,"sources":["webpack:///webpack/bootstrap 4e066a191bec907b2afa","webpack:///./server/common/logger.js","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///./server/blockchain/hlf-client.js","webpack:///external \"log4js\"","webpack:///external \"fabric-client\"","webpack:///external \"util\"","webpack:///./server/blockchain/transaction/transaction.js","webpack:///./server/index.js","webpack:///./server/common/env.js","webpack:///external \"dotenv\"","webpack:///./server/common/server.js","webpack:///external \"body-parser\"","webpack:///external \"http\"","webpack:///external \"os\"","webpack:///external \"cookie-parser\"","webpack:///./server/common/swagger/index.js","webpack:///external \"swagger-express-middleware\"","webpack:///external \"pino\"","webpack:///./server/blockchain/common/member.js","webpack:///./server/common/hlf/config.js","webpack:///./server/routes.js","webpack:///./server/api/controllers/examples/router.js","webpack:///./server/api/controllers/examples/controller.js","webpack:///./server/api/services/examples.service.js","webpack:///./server/api/services/examples.db.service.js","webpack:///./server/api/controllers/balance/router.js","webpack:///./server/api/controllers/balance/controller.js","webpack:///./server/api/services/balance/balance.service.js","webpack:///./server/api/controllers/iras/router.js","webpack:///./server/api/controllers/iras/controller.js","webpack:///./server/api/services/iras/iras.service.js"],"names":["l","name","process","env","APP_ID","level","LOG_LEVEL","log4js","require","logger","getLogger","hfc","member","setLevel","setLogger","HlfClient","constructor","_hfc","_orgs","_stateStore","_cryptoSuite","setClient","loadFromConfig","getConfigSetting","_network_config","organizations","_setFSKeyValueStore","_checkAdminClient","orgs","orgArr","Object","keys","forEach","orgName","_initCredentialStores","client","clientConfig","getClientConfig","newDefaultKeyValueStore","credentialStore","then","store","setStateStore","newCryptoKeyStore","cryptoStore","cryptoKeyStore","cryptoSuite","newCryptoSuite","setCryptoKeyStore","setCryptoSuite","Promise","resolve","isAdmin","_setupAdminAccount","organizationConfig","getOrganization","initCredentialStores","mspId","getMspid","adminKey","getAdminPrivateKey","adminCert","getAdminCert","createAdmin","getAdminClientForOrg","reject","getAdminContext","Error","hlfClient","module","exports","util","hlf","TrxClient","queryChainCode","peer","channelName","chaincodeName","args","fcn","username","debug","channel","getChannel","message","format","error","request","chaincodeId","responsePayLoads","queryByChaincode","i","length","info","toString","stack","invokeChainCode","peerNames","errorMsg","txIdString","txId","newTransactionID","getTransactionID","targets","chainId","JSON","stringify","results","sendTransactionProposal","proposalResponses","proposal","allGood","response","status","payload","endorsement","signature","oneGood","promises","eventHubs","getChannelEventHubsForOrg","eh","invokeEventPromise","ehTimeOut","setTimeout","getPeerAddr","disconnect","registerTxEvent","tx","code","blockNum","clearTimeout","err","unregister","connect","push","ordererReq","sendPromise","sendTransaction","all","pop","ehResult","trxClient","Server","router","routes","listen","PORT","dotenv","config","path","bodyParser","http","os","app","Express","ExpressServer","root","normalize","__dirname","set","use","json","urlencoded","extended","SESSION_SECRET","static","port","welcome","p","hostname","createServer","join","mw","enable","metadata","files","caseSensitive","strict","useBasePath","apiPath","SWAGGER_API_SPEC","parseRequest","cookie","secret","limit","REQUEST_LIMIT","CORS","validateRequest","req","res","next","send","getUserContext","user","isEnrolled","_name","catch","createUser","mspid","cryptoContent","privateKeyPEM","signedCertPEM","file","TARGET_NETWORK","setConfigSetting","addConfigFile","examplesRouter","balanceRouter","irasRouter","express","Router","post","controller","create","get","test","hello","byId","Controller","ExamplesService","r","params","id","end","body","location","db","insert","ExamplesDatabase","_data","_counter","record","getBalance","move","addUser","saveUser","BalanceService","transaction","from","to","amount","peers","balance","query","Id","Name","Age","Sex","Channel","addFile","IrasService","peers2","fileHash","fileName","userName","security","fileSize","accessType","result","date","description"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4e066a191bec907b2afa","import pino from 'pino';\n\nconst l = pino({\n  name: process.env.APP_ID,\n  level: process.env.LOG_LEVEL,\n});\n\nexport default l;\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/logger.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 2\n// module chunks = 0","/* eslint-disable prefer-destructuring */\n\nconst log4js = require('log4js');\n\nconst logger = log4js.getLogger('HLF');\nconst hfc = require('fabric-client');\nconst member = require('./common/member.js');\n\nlogger.setLevel('DEBUG');\nhfc.setLogger(logger);\n\nclass HlfClient {\n  constructor() {\n    this._hfc = null;\n    this._orgs = null;\n    this._stateStore = {};\n    this._cryptoSuite = {};\n  }\n\n  setClient() {\n    this._hfc = hfc.loadFromConfig(hfc.getConfigSetting('network-connection-profile-path'));\n    this._orgs = this._hfc._network_config._network_config.organizations;\n    this._setFSKeyValueStore(this._orgs);\n    this._checkAdminClient(this._orgs);\n  }\n\n  _setFSKeyValueStore(orgs) {\n    const orgArr = Object.keys(orgs);\n    orgArr.forEach(async orgName => {\n      this._hfc.loadFromConfig(hfc.getConfigSetting(`${orgName}-connection-profile-path`));\n      await this._initCredentialStores(this._hfc, orgName);\n    });\n  }\n\n  async _initCredentialStores(client, orgName) {\n    const clientConfig = client._network_config.getClientConfig();\n    return hfc.newDefaultKeyValueStore(clientConfig.credentialStore)\n      .then(store => {\n        client.setStateStore(store);\n        this._stateStore[orgName] = store;\n        return hfc.newCryptoKeyStore(clientConfig.credentialStore.cryptoStore);\n      })\n      .then(cryptoKeyStore => {\n        const cryptoSuite = hfc.newCryptoSuite();\n        cryptoSuite.setCryptoKeyStore(cryptoKeyStore);\n        client.setCryptoSuite(cryptoSuite);\n        this._cryptoSuite[orgName] = cryptoSuite;\n        return Promise.resolve();\n      });\n  }\n\n  _checkAdminClient(orgs) {\n    const isAdmin = hfc.getConfigSetting('isAdminClient');\n    const orgArr = Object.keys(orgs);\n\n    if (isAdmin === 'true') {\n      orgArr.forEach(async orgName => {\n        await this._setupAdminAccount(orgName);\n      });\n    }\n  }\n\n  async _setupAdminAccount(orgName) {\n    const organizationConfig = this._hfc._network_config.getOrganization(orgName, true);\n\n    const client = new hfc();\n    client.loadFromConfig(hfc.getConfigSetting(`${orgName}-connection-profile-path`));\n    await client.initCredentialStores();\n\n    const mspId = organizationConfig.getMspid();\n    const adminKey = organizationConfig.getAdminPrivateKey();\n    const adminCert = organizationConfig.getAdminCert();\n\n    await member.createAdmin(client, mspId, adminKey, adminCert);\n  }\n\n  getAdminClientForOrg(orgName) {\n    return new Promise(async (resolve, reject) => {\n      if (this._hfc) {\n        this._hfc.loadFromConfig(hfc.getConfigSetting(`${orgName}-connection-profile-path`));\n        this._hfc.setStateStore(this._stateStore[orgName]);\n        this._hfc.setCryptoSuite(this._cryptoSuite[orgName]);\n        const organizationConfig = this._hfc._network_config.getOrganization(orgName, true);\n        const mspId = organizationConfig.getMspid();\n        await member.getAdminContext(this._hfc, mspId);\n        resolve(this._hfc);\n      } else {\n        reject(new Error('Failed to Get Admin Client'));\n      }\n    });\n  }\n}\n\nconst hlfClient = new HlfClient();\nmodule.exports = hlfClient;\n\n\n\n// WEBPACK FOOTER //\n// ./server/blockchain/hlf-client.js","module.exports = require(\"log4js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"log4js\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"fabric-client\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fabric-client\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 6\n// module chunks = 0","/* eslint-disable prefer-destructuring */\n\nconst log4js = require('log4js');\n\nconst logger = log4js.getLogger('Transaction');\nlogger.setLevel('DEBUG');\n\nconst util = require('util');\nconst hlf = require('../hlf-client');\n\nclass TrxClient {\n  async queryChainCode(peer, channelName, chaincodeName, args, fcn, username, orgName) {\n    try {\n      const client = await hlf.getAdminClientForOrg(orgName);\n      logger.debug('Successfully got the fabric client for the organization \"%s\"', orgName);\n      const channel = client.getChannel(channelName);\n      if (!channel) {\n        const message = util.format('Channel %s was not defined in the connection profile', channelName);\n        logger.error(message);\n        throw new Error(message);\n      }\n\n      // send query\n      const request = {\n        // targets: [peer], // queryByChaincode allows for multiple targets\n        chaincodeId: chaincodeName,\n        fcn,\n        args,\n      };\n      const responsePayLoads = await channel.queryByChaincode(request);\n      if (responsePayLoads) {\n        for (let i = 0; i < responsePayLoads.length; i++) {\n          logger.info(`${args[0]} now has ${responsePayLoads[i].toString('utf8')\n          } after the move`);\n        }\n        return `${args[0]} now has ${responsePayLoads[0].toString('utf8')\n        } after the move`;\n      }\n      logger.error('responsePayLoads is null');\n      return 'responsePayLoads is null';\n    } catch (error) {\n      logger.error(`Failed to query due to error: ${error.stack}` ? error.stack : error);\n      return error.toString();\n    }\n  }\n\n  async invokeChainCode(peerNames, channelName, chaincodeName, fcn, args, username, orgName) {\n    logger.debug(util.format('\\n============ invoke transaction on channel %s ============\\n', channelName));\n    let errorMsg = null;\n    let txIdString = null;\n    try {\n      // first setup the client for this org\n      const client = await hlf.getAdminClientForOrg(orgName);\n      logger.debug('Successfully got the fabric client for the organization \"%s\"', orgName);\n      const channel = client.getChannel(channelName);\n      if (!channel) {\n        const message = util.format('Channel %s was not defined in the connection profile', channelName);\n        logger.error(message);\n        throw new Error(message);\n      }\n      const txId = client.newTransactionID();\n      // will need the transaction ID string for the event registration later\n      txIdString = txId.getTransactionID();\n\n      // send proposal to endorser\n      const request = {\n        targets: peerNames,\n        chaincodeId: chaincodeName,\n        fcn,\n        args,\n        chainId: channelName,\n        txId,\n      };\n      logger.debug('request:' + JSON.stringify(request));\n\n      const results = await channel.sendTransactionProposal(request);\n\n      // the returned object has both the endorsement results\n      // and the actual proposal, the proposal will be needed\n      // later when we send a transaction to the orderer\n      const proposalResponses = results[0];\n      const proposal = results[1];\n\n      // lets have a look at the responses to see if they are\n      // all good, if good they will also include signatures\n      // required to be committed\n      let allGood = true;\n      for (const i in proposalResponses) {\n        logger.info(util.format(\n          'AAAA sent Proposal and received ProposalResponse: Status - %s, message - \"%s\", metadata - \"%s\", endorsement signature: %s',\n          proposalResponses[0].response.status, proposalResponses[0].response.message,\n          proposalResponses[0].response.payload, proposalResponses[0].endorsement.signature));\n\n        let oneGood = false;\n        if (proposalResponses && proposalResponses[i].response &&\n          proposalResponses[i].response.status === 200) {\n          oneGood = true;\n          logger.info('invoke chaincode proposal was good');\n        } else {\n          logger.error(JSON.stringify(proposalResponses));\n          logger.error('invoke chaincode proposal was bad');\n        }\n        allGood = allGood & oneGood;\n      }\n\n      if (allGood) {\n        logger.info(util.format(\n          'Successfully sent Proposal and received ProposalResponse: Status - %s, message - \"%s\", metadata - \"%s\", endorsement signature: %s',\n          proposalResponses[0].response.status, proposalResponses[0].response.message,\n          proposalResponses[0].response.payload, proposalResponses[0].endorsement.signature));\n\n        // wait for the channel-based event hub to tell us\n        // that the commit was good or bad on each peer in our organization\n        const promises = [];\n        const eventHubs = channel.getChannelEventHubsForOrg();\n        eventHubs.forEach(eh => {\n          logger.debug('invokeEventPromise - setting up event');\n          const invokeEventPromise = new Promise((resolve, reject) => {\n            const ehTimeOut = setTimeout(() => {\n              const message = `REQUEST_TIMEOUT:${eh.getPeerAddr()}`;\n              logger.error(message);\n              eh.disconnect();\n            }, 3000);\n            eh.registerTxEvent(txIdString, (tx, code, blockNum) => {\n              logger.info('The chaincode invoke chaincode transaction has been committed on peer %s', eh.getPeerAddr());\n              logger.info('Transaction %s has status of %s in blocl %s', tx, code, blockNum);\n              clearTimeout(ehTimeOut);\n\n              if (code !== 'VALID') {\n                const message = util.format('The invoke chaincode transaction was invalid, code:%s', code);\n                logger.error(message);\n                reject(new Error(message));\n              } else {\n                const message = 'The invoke chaincode transaction was valid.';\n                logger.info(message);\n                resolve(message);\n              }\n            }, err => {\n              clearTimeout(ehTimeOut);\n              logger.error(err);\n              reject(err);\n            },\n              // the default for 'unregister' is true for transaction listeners\n              // so no real need to set here, however for 'disconnect'\n              // the default is false as most event hubs are long running\n              // in this use case we are using it only once\n            { unregister: true, disconnect: false },\n            );\n            eh.connect();\n          });\n          promises.push(invokeEventPromise);\n        });\n\n        const ordererReq = {\n          txId,\n          proposalResponses,\n          proposal,\n        };\n        const sendPromise = channel.sendTransaction(ordererReq);\n        // put the send to the orderer last so that the events get registered and\n        // are ready for the orderering and committing\n        promises.push(sendPromise);\n        const results = await Promise.all(promises);\n        logger.debug(util.format('------->>> R E S P O N S E : %j', results));\n        const response = results.pop(); //  orderer results are last in the results\n        if (response.status === 'SUCCESS') {\n          logger.info('Successfully sent transaction to the orderer.');\n        } else {\n          errorMsg = util.format('Failed to order the transaction. Error code: %s', response.status);\n          logger.debug(errorMsg);\n        }\n\n        // now see what each of the event hubs reported\n        for (const i in results) {\n          const ehResult = results[i];\n          const eh = eventHubs[i];\n          logger.debug('Event results for event hub :%s', eh.getPeerAddr());\n          if (typeof ehResult === 'string') {\n            logger.debug(ehResult);\n          } else {\n            if (!errorMsg) errorMsg = ehResult.toString();\n            logger.debug(ehResult.toString());\n          }\n        }\n      } else {\n        errorMsg = util.format('Failed to send Proposal and receive all good ProposalResponse');\n        logger.debug(errorMsg);\n      }\n    } catch (error) {\n      logger.error(`Failed to invoke due to error: ${error.stack}` ? error.stack : error);\n      errorMsg = error.toString();\n    }\n\n    if (!errorMsg) {\n      const message = util.format(\n        'Successfully invoked the chaincode %s to the channel \\'%s\\' for transaction ID: %s',\n        orgName, channelName, txIdString);\n      logger.info(message);\n\n      return txIdString;\n    }\n    const message = util.format('Failed to invoke chaincode. cause:%s', errorMsg);\n    logger.error(message);\n    throw new Error(message);\n  }\n}\n\nconst trxClient = new TrxClient();\nmodule.exports = trxClient;\n\n\n\n// WEBPACK FOOTER //\n// ./server/blockchain/transaction/transaction.js","import './common/env';\nimport Server from './common/server';\nimport routes from './routes';\n\nexport default new Server()\n  .router(routes)\n  .listen(process.env.PORT);\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","import dotenv from 'dotenv';\n\ndotenv.config();\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/env.js","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 11\n// module chunks = 0","/**\n * Copyright 2018 (주)KT All Rights Reserved.\n *\n *\n */\n\nimport Express from 'express';\nimport * as path from 'path';\nimport * as bodyParser from 'body-parser';\nimport * as http from 'http';\nimport * as os from 'os';\nimport cookieParser from 'cookie-parser';\nimport swaggerify from './swagger';\nimport l from './logger';\n\nconst hlf = require('../blockchain/hlf-client');\nrequire('./hlf/config.js');\n\nconst app = new Express();\n\nexport default class ExpressServer {\n  constructor() {\n    const root = path.normalize(`${__dirname}/../..`);\n    app.set('appPath', `${root}client`);\n    app.use(bodyParser.json());\n    app.use(bodyParser.urlencoded({ extended: true }));\n    app.use(cookieParser(process.env.SESSION_SECRET));\n    app.use(Express.static(`${root}/public`));\n\n    hlf.setClient();\n  }\n\n  router(routes) {\n    swaggerify(app, routes);\n    return this;\n  }\n\n  listen(port = process.env.PORT) {\n    const welcome = p => () => l.info(`up and running in ${process.env.NODE_ENV || 'development'} @: ${os.hostname()} on port: ${p}}`);\n    http.createServer(app).listen(port, welcome(port));\n    return app;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/server.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 16\n// module chunks = 0","import middleware from 'swagger-express-middleware';\nimport * as path from 'path';\n\nexport default function (app, routes) {\n  middleware(path.join(__dirname, 'Api.yaml'), app, (err, mw) => {\n    // Enable Express' case-sensitive and strict options\n    // (so \"/entities\", \"/Entities\", and \"/Entities/\" are all different)\n    app.enable('case sensitive routing');\n    app.enable('strict routing');\n\n    app.use(mw.metadata());\n    app.use(mw.files({\n      // Override the Express App's case-sensitive \n      // and strict-routing settings for the Files middleware.\n      caseSensitive: false,\n      strict: false,\n    }, {\n      useBasePath: true,\n      apiPath: process.env.SWAGGER_API_SPEC,\n      // Disable serving the \"Api.yaml\" file\n      // rawFilesPath: false\n    }));\n\n    app.use(mw.parseRequest({\n      // Configure the cookie parser to use secure cookies\n      cookie: {\n        secret: process.env.SESSION_SECRET,\n      },\n      // Don't allow JSON content over 100kb (default is 1mb)\n      json: {\n        limit: process.env.REQUEST_LIMIT,\n      },\n    }));\n\n    // These two middleware don't have any options (yet)\n    app.use(\n      mw.CORS(),\n      mw.validateRequest());\n\n    // Error handler to display the validation error as HTML\n    app.use((err, req, res, next) => { // eslint-disable-line no-unused-vars, no-shadow\n      res.status(err.status || 500);\n      res.send(\n        `<h1>${err.status || 500} Error</h1>` +\n        `<pre>${err.message}</pre>`);\n    });\n\n    routes(app);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/swagger/index.js","module.exports = require(\"swagger-express-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"swagger-express-middleware\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"pino\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pino\"\n// module id = 19\n// module chunks = 0","/**\n *\n * Copyright 2018 KT All Rights Reserved.\n *\n */\n\nimport l from '../../common/logger';\n\nfunction getAdminContext(client, mspId) {\n  return client.getUserContext(`${mspId}Admin`, true)\n    .then(user => new Promise((resolve, reject) => {\n      if (user && user.isEnrolled()) {\n        l.info(`Successfully loaded ${user._name} from persistence`);\n        return resolve(user);\n      }\n      /*\n          Refactor-Me: user 가 없을 경우 예외처리 필요.\n       */\n    }))\n    .catch(err => Promise.reject(new Error(`Failed to Get Admin member from persistence : ${err}`)));\n}\nmodule.exports.getAdminContext = getAdminContext;\n\nfunction createAdmin(client, mspId, adminKey, adminCert) {\n  return client.getUserContext(`${mspId}Admin`, true)\n    .then(user => new Promise((resolve, reject) => {\n      if (user && user.isEnrolled()) {\n        l.info(`Successfully loaded ${user._name} from persistence`);\n        return resolve(user);\n      }\n\n      return resolve(client.createUser({\n        username: `${mspId}Admin`,\n        mspid: mspId,\n        cryptoContent: {\n          privateKeyPEM: adminKey,\n          signedCertPEM: adminCert,\n        },\n      }));\n    }))\n    .catch(err => Promise.reject(new Error(`Failed to create member from cert : ${err}`)));\n}\nmodule.exports.createAdmin = createAdmin;\n\n\n\n// WEBPACK FOOTER //\n// ./server/blockchain/common/member.js","const util = require('util');\nconst path = require('path');\nconst hfc = require('fabric-client');\n\nlet file = 'network-config%s.yaml';\n\nconst env = process.env.TARGET_NETWORK;\nif (env) { file = util.format(file, `-${env}`); } else { file = util.format(file, ''); }\n\nhfc.setConfigSetting('network-connection-profile-path', path.join(__dirname, 'connection-profile', file));\n\n// eslint-disable-next-line eqeqeq\nif (env == 'first_network') {\n  hfc.setConfigSetting('Org1-connection-profile-path', path.join(__dirname, 'connection-profile', `org1-${env}.yaml`));\n  hfc.setConfigSetting('Org2-connection-profile-path', path.join(__dirname, 'connection-profile', `org1-${env}.yaml`));\n} else {\n  hfc.setConfigSetting('Org1-connection-profile-path', path.join(__dirname, 'connection-profile', `org1-${env}.yaml`));\n  hfc.setConfigSetting('Org2-connection-profile-path', path.join(__dirname, 'connection-profile', `org2-${env}.yaml`));\n}\nhfc.addConfigFile(path.join(__dirname, 'config.json'));\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/hlf/config.js","import examplesRouter from './api/controllers/examples/router';\nimport balanceRouter from './api/controllers/balance/router';\nimport irasRouter from './api/controllers/iras/router';\n\nexport default function routes(app) {\n  app.use('/api/v1/examples', examplesRouter);\n  app.use('/api/v1/balance', balanceRouter);\t\n  app.use('/api/v1/iras', irasRouter);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","import * as express from 'express';\nimport controller from './controller';\n\n\n\nexport default express\n  .Router()\n  .post('/', controller.create)\n  .get('/', controller.all)\n  .get('/test', controller.test)\n  .get('/hello',controller.hello)\n  .get('/:id', controller.byId);\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/examples/router.js","import ExamplesService from '../../services/examples.service';\n\nexport class Controller {\n  all(req, res) {\n    ExamplesService.all()\n      .then(r => res.json(r));\n  }\n\n  test(req, res) {\n    ExamplesService.test(req, res)\n      .then(r => res.json(r));\n  }\n\n  hello(req, res) {\n    ExamplesService.hello(req, res)\n      .then(r => res.json(r));\n  }\n\n  byId(req, res) {\n    ExamplesService\n      .byId(req.params.id)\n      .then(r => {\n        if (r) res.json(r);\n        else res.status(404).end();\n      });\n  }\n\n  create(req, res) {\n    ExamplesService\n      .create(req.body.name)\n      .then(r => res\n        .status(201)\n        .location(`/api/v1/examples/${r.id}`)\n        .json(r));\n  }\n}\n\nexport default new Controller();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/examples/controller.js","import l from '../../common/logger';\nimport db from './examples.db.service';\n\nclass ExamplesService {\n  all() {\n    l.info(`${this.constructor.name}.all()`);\n    return db.all();\n  }\n\n  byId(id) {\n    l.debug('hello world!!!!');\n    l.info(`${this.constructor.name}.byId(${id})`);\n    return db.byId(id);\n  }\n\n  create(name) {\n    return db.insert(name);\n  }\n}\n\nexport default new ExamplesService();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/services/examples.service.js","class ExamplesDatabase {\n  constructor() {\n    this._data = [];\n    this._counter = 0;\n\n    this.insert('example 0');\n    this.insert('example 1');\n  }\n\n  all() {\n    return Promise.resolve(this._data);\n  }\n\n  byId(id) {\n    return Promise.resolve(this._data[id]);\n  }\n\n  insert(name) {\n    const record = {\n      id: this._counter,\n      name,\n    };\n\n    this._counter += 1;\n    this._data.push(record);\n\n    return Promise.resolve(record);\n  }\n}\n\nexport default new ExamplesDatabase();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/services/examples.db.service.js","import * as express from 'express';\nimport controller from './controller';\n\nexport default express\n  .Router()\n  .get('/hello', controller.hello)\n  .get('/:id', controller.getBalance)\n  .post('/', controller.move)\n  .post('/user', controller.addUser)\n  .post('/saveUser', controller.saveUser);\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/balance/router.js","import BalanceService from '../../services/balance/balance.service';\n\nexport class Controller {\n  getBalance(req, res) {\n    BalanceService\n      .getBalance(req, res)\n      .then(r => {\n        if (r) res.json(r);\n        else res.status(404).end();\n      });\n  }\n\n  hello(req, res) {\n    BalanceService\n      .hello(req, res)\n      .then(r => {\n        if (r) res.json(r);\n        else res.status(404).end();\n      });\n  }\n\n  move(req, res) {\n    BalanceService\n      .move(req, res)\n      .then(r => {\n        if (r) res.json(r);\n        else res.status(404).end();\n      });\n  }\n\n  addUser(req, res) {\n    BalanceService\n      .addUser(req, res)\n      .then(r => {\n        if (r) res.json(r);\n        else res.status(404).end();\n      });\n  }\n\n  saveUser(req, res) {\n    BalanceService\n      .saveUser(req, res)\n      .then(r => {\n        if (r) res.json(r);\n        else res.status(404).end();\n      });\n  }\n}\nexport default new Controller();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/balance/controller.js","import l from '../../../common/logger';\n\nconst transaction = require('../../../blockchain/transaction/transaction');\n\nclass BalanceService {\n  getBalance(req, res) {\n    const args = [];\n\n    args.push(req.params.id);\n    return Promise.resolve(transaction.queryChainCode(null, 'iraschannel', 'balance',\n      args, 'query', 'admin', 'Org1'));\n  }\n\t\n  hello(req, res) {\n    const args = [];\n\n    args.push(\"test\");\n    return Promise.resolve(transaction.queryChainCode(null, 'iraschannel', 'balance',\n      args, 'hello', 'admin', 'org1'));\n  }\n\n  move(req, res) {\n    l.info(`${this.constructor.name}.byId(${req})`);\n    const args = [];\n\n    args.push(req.body.from);\n    args.push(req.body.to);\n    args.push(req.body.amount.toString());\n\n    return Promise.resolve(transaction.invokeChainCode(null, 'iraschannel', 'balance',\n      'move', args, 'admin', 'Org1'));\n  }\n\n  addUser(req, res) {\n    l.info(`${this.constructor.name}.byId(${req})`);\n    const args = [];\n    const peers = [];\n\n    args.push(req.body.name);\n    // args.push('b');\n    args.push(req.body.balance.toString());\n\n    peers.push('peer0.org1.iras.com');\n    //peers.push('peer1.org1.example.com');\n    // peers.push('peer0.org2.example.com');\n    // peers.push('peer1.org2.example.com');\n\n    l.debug(`invoke peers:${peers}`);\n    return Promise.resolve(transaction.invokeChainCode(peers, 'iraschannel', 'balance',\n      'add', args, 'admin', 'Org1'));\n  }\n\n  saveUser(req, res) {\n    l.info(`${this.constructor.name}.byId(${req})`);\n    l.debug(req.query.Id);\n    l.debug(req.query.Name);\n    l.debug(req.query.Age);\n    l.debug(req.query.Sex);\n\n    const args = [];\n    const peers = [];\n\n    args.push(req.query.Id);\n    args.push(req.query.Name);\n    args.push(req.query.Age);\n    args.push(req.query.Sex);\n\n    // peers.push('peer0.org1.example.com');\n    // peers.push('peer1.org1.example.com');\n    // peers.push('peer0.org2.example.com');\n    // peers.push('peer1.org2.example.com');\n\n    l.debug(`invoke peers:${peers}`);\n    return Promise.resolve(transaction.invokeChainCode(null, req.query.Channel, 'balance',\n      'saveUser', args, 'admin', 'Org1'));\n  }\n}\n\nexport default new BalanceService();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/services/balance/balance.service.js","import * as express from 'express';\nimport controller from './controller';\n\nexport default express\n  .Router()\n  .post('/addFile', controller.addFile)\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/iras/router.js","import IrasService from '../../services/iras/iras.service';\n\nexport class Controller {\n\n  addFile(req, res) {\n    IrasService\n      .addFile(req, res)\n      .then(r => {\n        if (r) res.json(r);\n        else res.status(404).end();\n      });\n  }\n}\nexport default new Controller();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/iras/controller.js","import l from '../../../common/logger';\n\nconst transaction = require('../../../blockchain/transaction/transaction');\n\nclass IrasService {\n  addFile(req, res) {\n    l.info(`${this.constructor.name}.byId(${req})`);\n    const args = [];\n    const peers = [];\n//    const peers2 = [];\n    const peers2 = [];\n\n    args.push(req.body.fileHash);\n    args.push(req.body.fileName);\n    args.push(req.body.userName);\n    args.push(req.body.security);\n    args.push(req.body.fileSize.toString());\n    args.push(req.body.accessType);\n    args.push(req.body.result);\n    args.push(req.body.date);\n    args.push(req.body.description);\n\n    peers.push('peer0.org1.iras.com');\n    peers2.push('peer0.org2.iras.com');\n    //peers1.push('peer1.org1.cauiras.com');\n    //peers2.push('peer0.org2.cauiras.com');\n    //peers2.push('peer1.org2.cauiras.com');\n\n    l.debug(`invoke peers:${peers}`);\n    Promise.resolve(transaction.invokeChainCode(peers, 'iraschannel', 'iras', 'addFile', args, 'admin','Org1'));\n    return Promise.resolve(transaction.invokeChainCode(peers2, 'iraschannel', 'iras', 'addFile', args, 'admin','Org2'));\n\t  \n    //return Promise.resolve(transaction.invokeChainCode(peers2, 'iraschannel', 'iras',\n      //'addFile', args, 'admin', 'Org2'));\n  }\n}\n\nexport default new IrasService();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/services/iras/iras.service.js"],"sourceRoot":""}